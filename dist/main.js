figma.showUI(__html__,{height:420,width:340});function u(a){return a.replace(/,/g," ").replace(/(L|M|Z)/g," $1 ").trim().split("Z").map(e=>e.trim()).filter(Boolean).map(e=>(e+" Z").trim())}const i=figma.createFrame();i.name="Globe";i.resize(300,300);figma.currentPage.appendChild(i);figma.viewport.scrollAndZoomIntoView([i]);let s=new Map;async function l(a,n,e=1){if(s.has(a))return s.get(a);const r=figma.createPaintStyle();return r.name=a,r.paints=[{color:figma.util.rgb(n),opacity:e,type:"SOLID"}],s.set(a,r),r}async function c(a,n){const e=await l("country-fill","rgb(13, 153, 255)"),r=await l("country-stroke","rgb(255, 255, 255)"),t=figma.createVector();return t.vectorPaths=u(a).map(o=>({windingRule:"EVENODD",data:o})),await t.setStrokeStyleIdAsync(r.id),t.strokeWeight=.5,t.strokeAlign="OUTSIDE",await t.setFillStyleIdAsync(e.id),t.constraints={horizontal:"SCALE",vertical:"SCALE"},t.setPluginData("globe-id",n),t.name=n,t}figma.ui.onmessage=async a=>{switch(a.type){case"CREATE":{const n=a.features;i.children.forEach(t=>{t.remove()});const e=figma.createEllipse();e.resize(300,300),e.strokes=[],e.fills=[{color:figma.util.rgb("rgb(245, 245, 245)"),type:"SOLID"}],e.constraints={horizontal:"SCALE",vertical:"SCALE"},i.appendChild(e);for(const t of n)if(Array.isArray(t.d)){const o=[];for(let f of t.d){const m=await c(f,t.name);o.push(m)}const g=figma.group(o,i);g.name=t.name}else{const o=await c(t.d,t.name);i.appendChild(o)}const r=figma.createEllipse();r.resize(300,300),r.strokes=[{color:figma.util.rgb("rgb(100, 100, 100)"),type:"SOLID"}],r.fills=[],r.constraints={horizontal:"SCALE",vertical:"SCALE"},i.appendChild(r),i.setPluginData("rendered","true")}}};
